import requests

username=input("Username: ")
url = f'https://api.unacademy.com:443/api/v1/search_v3/educators/{username}/courses/v2/?filters_applied=%7B%22topic%22%3A%7B%22id%22%3A%22%22%7D%2C%22show_only%22%3A%7B%22id%22%3A%22ALL%22%7D%2C%22goal%22%3A%7B%22id%22%3A%22ALL%22%7D%2C%22language%22%3A%7B%22id%22%3A%22%22%7D%2C%22filter_by%22%3A%7B%22id%22%3A%22plus%22%7D%7D&limit={input("Count: ")}&offset=0'
headers = {"Sec-Ch-Ua": "\"Not-A.Brand\";v=\"99\", \"Chromium\";v=\"124\"", "Accept": "*/*", "Content-Type": "application/json", "Sec-Ch-Ua-Mobile": "?0", "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.6367.60 Safari/537.36", "Sec-Ch-Ua-Platform": "\"macOS\"", "Origin": "https://unacademy.com", "Sec-Fetch-Site": "same-site", "Sec-Fetch-Mode": "cors", "Sec-Fetch-Dest": "empty", "Referer": "https://unacademy.com/", "Accept-Encoding": "gzip, deflate, br", "Accept-Language": "en-GB,en-US;q=0.9,en;q=0.8", "Priority": "u=1, i"}
r=requests.get(url, headers=headers)
with open(f'./authors/{username}.json', "w+") as f:
    f.write(r.text)
for x in r.json()['results']:
    burp0_url = f'https://unacademy.com:443/api/v2/collection/{x["uid"]}/items/?limit=600'
    burp0_cookies = {"_gcl_au": "1.1.962670728.1714818672", "_fbp": "fb.1.1714818672455.72099583", "_gid": "GA1.2.1235432940.1714818729", "proxy-user-uid": "11226c68_4770_4baa_96a8_84bdfb93ec62", "joe-chnlcustid": "fed007be-d9f4-404d-abb6-f8317630a3d2", "joe-custinfo": "{\"wdgtOpnPrf\":\"1\"}", "analytics_session_id": "1714830508824", "ajs_anonymous_id": "83c58967-7a25-4474-85ec-afdf1568d3cc", "un_session_id": "8188f6c4_0111_413b_a1d4_a8e1af3c285f", "ajs_anonymous_id": "83c58967-7a25-4474-85ec-afdf1568d3cc", "accessToken": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjFiNWMxMWU0YWIyZDZmNGM0ZjYzYjIzMGNlNjEwMTA0In0.eyJ1c2VyX2lkIjo4NDA0NzIwNiwidWlkIjoiVzZMREwxQVBPOSIsImRpZCI6IiIsImp0aSI6IjE6RzFvazkwQmlwS2d1b0pRQlVoNURQVXVFY1p0M2U2IiwiZXhwIjoxNzE3NDIzMDI1LCJpYXQiOjE3MTQ4MzEwMjUsInR5cCI6MX0.K9o7FiWQAQxou6RiE7bDwoUZ0uhNOXaUPjtU-OMjtEBLTZY1ImBMoRZB_Wd2U6XYnBTnadeyBjp284pijZrvH969rzdfq5lUkU9_G-ukzt6hTA3x_9LydX-cRpB4N72vjxG4oYJ8wJ4fv4qg6w-ITeJ2p0pb6x31BuLqEfmv0vvaYmjSJrSK0or0dmwlhZf6iNewMTmudigBDBZz_wNGjBhf4D9bARi5cerQqvG9_Wsc-nezLrjqbKuFIurdojcChWtFBJvrUxYhr8pha4-SuCzf76_9z2RuNzo-3CKHK2Q8-zF6A_gt0gklVSMEOwGGuzX6tWYoLjufAwuQOfryIQ", "loggedIn": "true", "refreshToken": "GdUVCL9HyT6v2JCb15cQjrGJx3jMc4", "selectedGoalUid": "TEWDQ", "jwtToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiQW50YXJhIFNhcmthciIsInVpZCI6Ilc2TERMMUFQTzkiLCJhdmF0YXIiOiJodHRwczovL2VkZ2UudWFjZG4ubmV0L3N0YXRpYy90aHVtYm5haWwvdXNlci9kNjUwNjkzMjNjMGY0ZWQ0OGVkZDBhNzI0ZDg4NzRhMS44NDA0NDI2Nl8zP3E9MTAwJnc9NTEyIiwiYWNsIjpbeyJ0b3BpYyI6ImZlZWQ6VzZMREwxQVBPOToqIiwiYWN0aW9ucyI6WyJSRUFEIl19LHsidG9waWMiOiJzdHJlYWs6VzZMREwxQVBPOSIsImFjdGlvbnMiOlsiUkVBRCJdfSx7InRvcGljIjoibGl2ZWNvdW50ZXI6KiIsImFjdGlvbnMiOlsiUkVBRCJdfSx7InRvcGljIjoidmlkZW9fY2FsbDpXNkxETDFBUE85OioiLCJhY3Rpb25zIjpbIlJFQUQiXX1dfQ.aJODHABoWcxjB65hV3DE3I4KMGmQlqf65aeSdVDdeQM", "ajs_user_id": "W6LDL1APO9", "spd-custhash": "342551376c04ad891f9b4f7e5ed8d80b79f914ea", "isDarkModeOn": "true", "BROWSER_ID": "5b4954b6-9808-28bc-b646-1b7551d1ea76", "_gat_UA-69016858-2": "1", "anonymous_session_id": "c7b43c6f_a9f5_46e5_bd7a_dfeed9451a63", "_uetsid": "8f6bfeb00a0111ef876f413e401f9309", "_uetvid": "8f6c04700a0111ef98ec7fcdf4530599", "searchToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ODQwNDcyMDYsInVzZXJuYW1lIjoiQW50YXJhU2Fya2FyLTIxMzgiLCJmaXJzdF9uYW1lIjoiQW50YXJhIiwibGFzdF9uYW1lIjoiU2Fya2FyIiwiYmlvIjoiIiwidWlkIjoiVzZMREwxQVBPOSIsImF2YXRhciI6Imh0dHBzOi8vZWRnZS51YWNkbi5uZXQvc3RhdGljL3RodW1ibmFpbC91c2VyL2Q2NTA2OTMyM2MwZjRlZDQ4ZWRkMGE3MjRkODg3NGExLjg0MDQ0MjY2XzM_cT0xMDAmdz01MTIiLCJoYXNfcGx1c19zdWJzY3JpcHRpb24iOnRydWUsInN1YnNjcmlwdGlvbnMiOnsiVEVXRFEiOnsidHlwZSI6IlBsdXMiLCJleHBpcmVzX2F0IjoxNzIwODA4OTk5fX0sImlzX3BsdXMiOnRydWUsImV4cCI6MTcxNTQxNzQwOH0.JSyAmLg1SFQl83T9eY-6nzjeZ1UgcfXjuSOBsUQ23PE", "analytics_session_id.last_access": "1714832408857", "_gat_UA-5306665-19": "1", "_ga": "GA1.2.1412797073.1712653606", "_ga_6JX23YC5TQ": "GS1.1.1714830508.8.1.1714832409.0.0.0"}
    burp0_headers = {"Sec-Ch-Ua": "\"Not-A.Brand\";v=\"99\", \"Chromium\";v=\"124\"", "Sec-Ch-Ua-Mobile": "?0", "X-Platform": "0", "Authorization": "Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjFiNWMxMWU0YWIyZDZmNGM0ZjYzYjIzMGNlNjEwMTA0In0.eyJ1c2VyX2lkIjo4NDA0NzIwNiwidWlkIjoiVzZMREwxQVBPOSIsImRpZCI6IiIsImp0aSI6IjE6RzFvazkwQmlwS2d1b0pRQlVoNURQVXVFY1p0M2U2IiwiZXhwIjoxNzE3NDIzMDI1LCJpYXQiOjE3MTQ4MzEwMjUsInR5cCI6MX0.K9o7FiWQAQxou6RiE7bDwoUZ0uhNOXaUPjtU-OMjtEBLTZY1ImBMoRZB_Wd2U6XYnBTnadeyBjp284pijZrvH969rzdfq5lUkU9_G-ukzt6hTA3x_9LydX-cRpB4N72vjxG4oYJ8wJ4fv4qg6w-ITeJ2p0pb6x31BuLqEfmv0vvaYmjSJrSK0or0dmwlhZf6iNewMTmudigBDBZz_wNGjBhf4D9bARi5cerQqvG9_Wsc-nezLrjqbKuFIurdojcChWtFBJvrUxYhr8pha4-SuCzf76_9z2RuNzo-3CKHK2Q8-zF6A_gt0gklVSMEOwGGuzX6tWYoLjufAwuQOfryIQ", "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.6367.60 Safari/537.36", "Content-Type": "application/json", "Accept": "*/*", "Sec-Ch-Ua-Platform": "\"macOS\"", "Sec-Fetch-Site": "same-origin", "Sec-Fetch-Mode": "cors", "Sec-Fetch-Dest": "empty", "Referer": "https://unacademy.com/course/complete-course-on-language-english-in-india-and-research-unit-56-and-10/PCKE55IQ", "Accept-Encoding": "gzip, deflate, br", "Accept-Language": "en-GB,en-US;q=0.9,en;q=0.8", "Priority": "u=1, i"}
    rr=requests.get(burp0_url, headers=burp0_headers, cookies=burp0_cookies)
    with open(f'./courses/{x["uid"]}.json', "w+") as f:
        f.write(rr.text)